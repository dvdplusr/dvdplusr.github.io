<!DOCTYPE html>
<html>
<head>
    <title>XJS</title>
    <link rel="icon" href="xlang.ico">
    <style>
        body { font-family: monospace; background-color: #FFFFFF; }
        table { border-collapse: collapse; width: 100%; background-color: #FFFFFF; position: absolute; height: 100%; top: 0px; left: 0px; }
        th { background-color: #E6E6E6; }
        td, th { border: 1px solid #CFCFCF; text-align: left; padding: 8px; }
        td.lower { height: 1%; }
        textarea { border: none; resize: none; width: 90%; font-family: monospace; }
        textarea.body { height: 100%; }
        button { font-family: monospace; padding: 4px 6px; border-radius: 4px; background-color: #2e2e2e; color: #fff; border:none; border-bottom: 2px solid #141414; }
        button:hover { background-color: #1b1b1b; }
    </style>
</head>
<body>
    <table>
        <tr>
            <td><textarea class="body" id="input" placeholder="put your code here"></textarea></td>
        </tr>
        <tr>
            <td class="lower"><textarea id="output" placeholder="code output" rows="1"></textarea></td>
        </tr>
        <tr>
            <td class="lower">
                <button onclick="javascript:interpretCode()">run code</button>
                <button onclick="javascript:startNew()">start new</button>
                <button id="modeSwitch" onclick="javascript:switchModes()">cache clearing: off</button>
            </td>
        </tr>
    </table>
</body>
<script>
    const c = "><+-.)(!";
    const b = document.getElementById("modeSwitch");

    var m = false;
    var t = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    var s = 0;

    function switchModes()
    {
        m = !m;

        if(m) { b.innerHTML = "cache clearing: on"; b.style = "background-color:#00f; border-bottom: 2px solid #0000b0;"; }
        else { b.innerHTML = "cache clearing: off"; b.style = "background-color:#f00; border-bottom: 2px solid #b00000;"; }
    }

    function startNew()
    {
        document.getElementById("input").value = "";
        document.getElementById("output").value = "";
    }

    function interpretCode()
    {
        if(m) { for(var i = 0; i < t.length; i++) { t[i] = 0; } s = 0; }

        document.getElementById("output").value = "";
        var a = document.getElementById("input").value;

        for(var x = 0; x < a.length; x++)
        {
            if(a[x] == c[0]) { s = s + 1; }
            if(a[x] == c[1]) { s = s - 1; }
            if(a[x] == c[2]) { t[s] = t[s] + 1; }
            if(a[x] == c[3]) { t[s] = t[s] - 1; }
            if(a[x] == c[4]) { document.getElementById("output").value = document.getElementById("output").value + String.fromCharCode(t[s]); }
            if(a[x] == c[5]) { t[s] = t[s] + 10; }
            if(a[x] == c[6]) { t[s] = t[s] - 10; }
            if(a[x] == c[7]) { t[s] = 0; }
        }

        console.log("OUTPUT: " + document.getElementById("output").value);
    }

    switchModes();
</script>
</html>
